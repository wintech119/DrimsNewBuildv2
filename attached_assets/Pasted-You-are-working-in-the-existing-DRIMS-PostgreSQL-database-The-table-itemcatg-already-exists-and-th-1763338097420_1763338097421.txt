You are working in the existing DRIMS PostgreSQL database.
The table itemcatg already exists, and there are currently no data in this table.

Your task is to update the itemcatg table so that its structure matches exactly the new schema below, while:

Preserving the table name: itemcatg

Preserving or re-creating the primary key name: pk_itemcatg

Preserving or re-creating the unique constraint name: uk_itemcatg_1

Preserving any existing foreign key references from other tables that point to itemcatg.category_id

Preserving or re-creating any useful indexes on itemcatg (or recreating them after the change)

You must not leave any broken foreign keys or missing indexes when done.

1. Target schema for itemcatg

Update the table so that it matches this exact definition:

create table itemcatg 
(
    category_id integer not null generated by default as identity
        constraint pk_itemcatg primary key,

    category_code varchar(30) not null
        constraint c_itemcatg_1 check (category_code = upper(category_code))
        constraint uk_itemcatg_1 unique,

    -- Description of item category
    category_desc varchar(60) not null,

    -- Any comments related to this item type
    comments_text text,

    status_code char(1) not null
        constraint c_itemcatg_2 check (status_code in ('A','I')),

    create_by_id varchar(20) not null,
    create_dtime timestamp(0) without time zone not null,
    update_by_id varchar(20) not null,
    update_dtime timestamp(0) without time zone not null,
    version_nbr integer not null
);

2. Approach / Requirements

Inspect the current itemcatg table:

List its current columns, constraints, indexes, and any foreign keys referencing it (from other tables).

Because there is no data in itemcatg, you may:

Either use ALTER TABLE to add/drop/modify columns and constraints, or

DROP TABLE itemcatg and recreate it, but only if you:

First capture all foreign key constraints from other tables that reference itemcatg.category_id.

Recreate those foreign key constraints after recreating the table, with the same names and definitions.

After the change:

category_id must be the identity PK with constraint name pk_itemcatg.

category_code must:

Be varchar(30) not null

Have a CHECK constraint enforcing uppercase: category_code = upper(category_code) with name c_itemcatg_1

Have a UNIQUE constraint with name uk_itemcatg_1

category_desc must be varchar(60) not null.

comments_text must be text (nullable).

status_code must:

Be char(1) not null

Have CHECK constraint status_code in ('A','I') named c_itemcatg_2.

Audit fields must exist exactly as:

create_by_id varchar(20) not null

create_dtime timestamp(0) without time zone not null

update_by_id varchar(20) not null

update_dtime timestamp(0) without time zone not null

version_nbr integer not null

Ensure that any foreign keys from other tables that currently point to itemcatg.category_id are:

Still valid after the change.

Recreated if dropped, with the same names and ON DELETE / ON UPDATE behaviours as before.

Preserve or recreate any useful indexes on itemcatg (for example, on category_code), following DRIMS naming conventions (e.g., idx_itemcatg_category_code), unless they are fully covered by the PK/UNIQUE constraints.

3. Output

Generate a single SQL migration script that:

Performs any necessary ALTER TABLE / DROP TABLE / CREATE TABLE / ALTER TABLE ... ADD CONSTRAINT / index DDL.

Is safe to run once in a clean environment where itemcatg has no data.

Leaves all foreign key references to itemcatg intact and valid at the end.

Clearly comment the script in logical sections:

Capture existing FKs (if dropping table)

Modify or recreate itemcatg

Recreate foreign keys

Recreate indexes (if needed)

Do not change any other tables, schemas, or application logicâ€”only update itemcatg to match the new schema without breaking references.