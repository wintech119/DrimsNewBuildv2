Update the existing dnintake table so that it matches the following target definition, using safe ALTER TABLE operations only.


Do NOT drop and recreate the table if it already exists with data.


Preserve all existing data and foreign key relationships.


Do NOT break any existing code, behaviour, UI, workflows, business logic, database schema outside this table, or any previously implemented security fixes.


Use this structure as the source of truth and translate it into the necessary ALTER TABLE dnintake ... statements:
create table dnintake
(
	donation_id integer not null
		constraint fk_dnintake_donation references donation,
	inventory_id integer not null
		constraint fk_dnintake_warehouse references warehouse(warehouse_id),

	intake_date date not null
		constraint c_dnintake_1 check (intake_date <= CURRENT_DATE),

	comments_text varchar(255),

	status_code char(1) not null
		--I=Incomplete, C=Completed, V=Verified
		constraint c_dnintake_2 check (status_code in ('I','C','V')),

	create_by_id varchar(20) not null,
	create_dtime timestamp(0) without time zone not null,
	update_by_id varchar(20) not null,
	update_dtime timestamp(0) without time zone,
	verify_by_id varchar(20) not null,
	verify_dtime timestamp(0) without time zone,
	version_nbr integer not null,

	constraint pk_dnintake primary key(donation_id,inventory_id)
);

Requirements:


Use ALTER TABLE dnintake to:


Add any missing columns.


Add or fix foreign keys to donation and warehouse(warehouse_id).


Add the c_dnintake_1 and c_dnintake_2 check constraints if missing.


Ensure pk_dnintake is a composite primary key on (donation_id, inventory_id).


Ensure status_code is NOT NULL and only allows ('I','C','V').


Ensure intake_date is NOT NULL and <= CURRENT_DATE.




Do NOT:


Delete or corrupt existing data.


Break any existing flows related to donations, intake, warehouses, or logistics.


Modify other tables or any security-related configuration (CSP, headers, TLS, cookies, SRI, etc.).




After migration:


The dnintake table must match the structure above.


All existing application functionality must continue to work exactly as before.



